{{ 'component-main-product.css' | asset_url | stylesheet_tag }}

{% assign selected_varient = product.selected_or_first_available_variant %}

{% liquid
  assign show_any_badge = false

  if section.settings.show_sale_badge and selected_varient.compare_at_price > selected_varient.price
    assign show_any_badge = true
  endif

  if section.settings.show_new_badge
    assign days_since_published = 'now' | date: '%s' | minus: product.published_at | date: '%s' | divided_by: 86400
    if days_since_published <= section.settings.new_badge_days
      assign show_any_badge = true
    endif
  endif

  if section.settings.show_low_stock_badge and selected_varient.inventory_quantity <= section.settings.low_stock_threshold and selected_varient.inventory_quantity > 0
    assign show_any_badge = true
  endif
%}

<section class="page-width section-{{ section.id }}-padding">
  <div class="main-product-section" data-section-id="{{ section.id }}">
    <div class="product-main-wrapper">
      {% comment %} === LEFT COLUMN: PRODUCT MEDIA === {% endcomment %}
      <div class="product-media-wrapper">
        {% comment %} Product Badges - Above Media {% endcomment %}
        {% if show_any_badge %}
          <div class="product-badges">
            {% if section.settings.show_sale_badge and selected_varient.compare_at_price > selected_varient.price %}
              <span class="badge badge-sale">
                {% if section.settings.sale_badge_style == 'percentage' %}
                  -
                  {{-
                    selected_varient.compare_at_price
                    | minus: selected_varient.price
                    | times: 100
                    | divided_by: selected_varient.compare_at_price
                  -}}
                  %
                {% elsif section.settings.sale_badge_style == 'amount' %}
                  Save {{ selected_varient.compare_at_price | minus: selected_varient.price | money }}
                {% else %}
                  Sale
                {% endif %}
              </span>
            {% endif %}

            {% if section.settings.show_new_badge %}
              {% assign days_since_published = 'now'
                | date: '%s'
                | minus: product.published_at
                | date: '%s'
                | divided_by: 86400
              %}
              {% if days_since_published <= section.settings.new_badge_days %}
                <span class="badge badge-new">New</span>
              {% endif %}
            {% endif %}

            {% if section.settings.show_low_stock_badge
              and selected_varient.inventory_quantity <= section.settings.low_stock_threshold
              and selected_varient.inventory_quantity > 0
            %}
              <span class="badge badge-low-stock">
                {% if section.settings.show_inventory_count %}
                  Only {{ selected_varient.inventory_quantity }} left!
                {% else %}
                  Low Stock
                {% endif %}
              </span>
            {% endif %}
          </div>
        {% endif %}

        {% comment %} Media Gallery {% endcomment %}
        {% render 'product-media',
          product: product,
          media_layout: section.settings.media_layout,
          media_size: section.settings.media_size,
          enable_video_looping: section.settings.enable_video_looping,
          enable_lightbox: section.settings.enable_lightbox,
          show_thumbnails: section.settings.show_thumbnail_navigation,
          media_aspect_ratio: section.settings.media_aspect_ratio,
          enable_zoom: section.settings.media_zoom_enabled
        %}
      </div>

      {% comment %} === RIGHT COLUMN: PRODUCT INFO (BLOCKS) === {% endcomment %}
      <div class="product-info-wrapper">
        {% form 'product', product, class: 'product-form' %}
          <input type="hidden" name="id" value="{{ selected_varient.id }}">

          {% for block in section.blocks %}
            <div class="product-block product-block--{{ block.type }}" {{ block.shopify_attributes }}>
              {% case block.type %}
                  {% comment %} TEXT BLOCK {% endcomment %}
                {% when 'text' %}
                  <div class="product__text {% if block.settings.text_style == 'uppercase' %}caption-with-letter-spacing{% elsif block.settings.text_style == 'subtitle' %}subtitle{% endif %}">
                    {{ block.settings.text }}
                  </div>

                  {% comment %} TITLE BLOCK {% endcomment %}
                {% when 'title' %}
                  <h1 class="product__title {{ block.settings.heading_size | default: 'h1' }}">
                    {{ product.title }}
                  </h1>

                  {% comment %} PRICE BLOCK {% endcomment %}
                {% when 'price' %}
                  <div class="product-price-wrapper">
                    <div class="price" data-price-wrapper>
                      {% if selected_varient.compare_at_price > selected_varient.price %}
                        <span class="price__sale">{{ selected_varient.price | money }}</span>
                        <s class="price__compare">{{ selected_varient.compare_at_price | money }}</s>
                      {% else %}
                        <span class="price__regular">{{ selected_varient.price | money }}</span>
                      {% endif %}
                    </div>
                  </div>

                  {% comment %} DESCRIPTION BLOCK {% endcomment %}
                {% when 'description' %}
                  <div class="product-description rte">
                    {{ product.description | strip_html | truncatewords: 50 }}
                  </div>

                  {% comment %} VENDOR BLOCK {% endcomment %}
                {% when 'vendor' %}
                  {% if product.vendor != blank %}
                    <div class="product-vendor">
                      <span class="vendor-label">{{ block.settings.label | default: 'Brand' }}:</span>
                      <span>{{ product.vendor }}</span>
                    </div>
                  {% endif %}

                  {% comment %} SKU BLOCK {% endcomment %}
                {% when 'sku' %}
                  {% if selected_varient.sku != blank %}
                    <div class="product-sku">
                      <span class="sku-label">{{ block.settings.label | default: 'SKU' }}:</span>
                      <span data-variant-sku>{{ selected_varient.sku }}</span>
                    </div>
                  {% endif %}

                  {% comment %} AVAILABILITY BLOCK {% endcomment %}
                {% when 'availability' %}
                  <div class="product-availability" data-variant-availability>
                    {% if selected_varient.available %}
                      <span class="in-stock">{{ block.settings.in_stock_text | default: '‚úì In stock' }}</span>
                    {% else %}
                      <span class="out-of-stock">{{ block.settings.out_stock_text | default: 'Sold out' }}</span>
                    {% endif %}
                  </div>

                {% when 'variantpicker' %}
                  {% unless product.has_only_default_variant %}
                    <div class="variant-selectors" data-section="{{ section.id }}">
                      {% for option in product.options_with_values %}
                        <div class="variant-option">
                          <label for="option-{{ section.id }}-{{ forloop.index0 }}">{{ option.name }}</label>

                          {% assign option_name_downcase = option.name | downcase %}
                          {% assign is_color = false %}
                          {% if option_name_downcase contains 'color' or option_name_downcase contains 'colour' %}
                            {% assign is_color = true %}
                          {% endif %}

                          {% if block.settings.pickertype == 'swatch' and is_color %}
                            <!-- swatches -->
                          {% elsif block.settings.pickertype == 'button' %}
                            <!-- buttons -->
                          {% else %}
                            <!-- dropdown -->
                          {% endif %}
                        </div>
                      {% endfor %}
                    </div>
                  {% endunless %}
                {% when 'variant_picker' %}
                  {% unless product.has_only_default_variant %}
                    <div class="variant-selectors" data-section="{{ section.id }}">
                      {% for option in product.options_with_values %}
                        <div class="variant-option">
                          <label for="option-{{ section.id }}-{{ forloop.index0 }}">{{ option.name }}</label>

                          {% assign option_name_downcase = option.name | downcase %}
                          {% assign is_color = false %}
                          {% if option_name_downcase contains 'color' or option_name_downcase contains 'colour' %}
                            {% assign is_color = true %}
                          {% endif %}

                          {% if block.settings.picker_type == 'swatch' and is_color %}
                            {%- comment -%} Color Swatches {%- endcomment -%}
                            <div class="variant-swatches variant-swatches--{{ block.settings.swatch_shape }}">
                              {% for value in option.values %}
                                {% assign swatch_color = value | handle %}
                                {% assign variant_for_value = product.variants | where: option.name, value | first %}

                                <input
                                  type="radio"
                                  name="options[{{ option.name | escape }}]"
                                  value="{{ value | escape }}"
                                  id="swatch-{{ section.id }}-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}"
                                  {% if value == option.selected_value %}
                                    checked
                                  {% endif %}
                                >
                                <label
                                  for="swatch-{{ section.id }}-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}"
                                  class="variant-swatch"
                                  title="{{ value }}"
                                >
                                  {% if variant_for_value.metafields.custom.color.value %}
                                    <span
                                      class="swatch-color"
                                      style="background-color: {{ variant_for_value.metafields.custom.color.value }};"
                                    ></span>
                                  {% elsif variant_for_value.image %}
                                    <span
                                      class="swatch-image"
                                      style="background-image: url({{ variant_for_value.image | image_url: width: 60 }});"
                                    ></span>
                                  {% else %}
                                    <span class="swatch-color" style="background-color: {{ swatch_color }};"></span>
                                  {% endif %}
                                  <span class="visually-hidden">{{ value }}</span>
                                </label>
                              {% endfor %}
                            </div>

                          {% elsif block.settings.picker_type == 'button' %}
                            {%- comment -%} Button Picker {%- endcomment -%}
                            <div class="variant-buttons">
                              {% for value in option.values %}
                                <input
                                  type="radio"
                                  name="options[{{ option.name | escape }}]"
                                  value="{{ value | escape }}"
                                  id="option-{{ section.id }}-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}"
                                  {% if value == option.selected_value %}
                                    checked
                                  {% endif %}
                                >
                                <label
                                  for="option-{{ section.id }}-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}"
                                  class="variant-button"
                                >
                                  {{ value }}
                                </label>
                              {% endfor %}
                            </div>

                          {% else %}
                            {%- comment -%} Dropdown Picker {%- endcomment -%}
                            <select name="options[{{ option.name | escape }}]" class="variant-select">
                              {% for value in option.values %}
                                <option
                                  value="{{ value | escape }}"
                                  {% if value == option.selected_value %}
                                    selected
                                  {% endif %}
                                >
                                  {{ value }}
                                </option>
                              {% endfor %}
                            </select>
                          {% endif %}
                        </div>
                      {% endfor %}
                    </div>
                  {% endunless %}

                  {% comment %} QUANTITY SELECTOR BLOCK {% endcomment %}
                {% when 'quantity_selector' %}
                  <div class="quantity-selector">
                    <label for="Quantity-{{ section.id }}">Quantity</label>
                    <div class="quantity">
                      <button
                        class="quantity__button"
                        type="button"
                        onclick="this.nextElementSibling.stepDown(); this.nextElementSibling.dispatchEvent(new Event('change'))"
                      >
                        <span>‚àí</span>
                      </button>
                      <input
                        type="number"
                        class="quantity__input"
                        id="Quantity-{{ section.id }}"
                        name="quantity"
                        value="1"
                        min="1"
                        max="99"
                        step="1"
                      >
                      <button
                        class="quantity__button"
                        type="button"
                        onclick="this.previousElementSibling.stepUp(); this.previousElementSibling.dispatchEvent(new Event('change'))"
                      >
                        <span>+</span>
                      </button>
                    </div>
                  </div>

                  {% comment %} BUY BUTTONS BLOCK {% endcomment %}
                {% when 'buy_buttons' %}
                  <div class="product-form-buttons">
                    <button
                      type="submit"
                      name="add"
                      class="product-form__submit button button--full-width {% if selected_varient.available %}button--primary{% else %}button--secondary{% endif %}"
                      {% unless selected_varient.available %}
                        disabled
                      {% endunless %}
                    >
                      <span>
                        {% if selected_varient.available %}
                          {{ block.settings.button_text | default: 'Add to cart' }}
                        {% else %}
                          Sold out
                        {% endif %}
                      </span>
                    </button>

                    {% if block.settings.show_dynamic_checkout %}
                      {{ form | payment_button }}
                    {% endif %}

                    {% if block.settings.show_gift_card_recipient and product.gift_card? %}
                      <div class="gift-card-recipient" style="margin-top: 1rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                          <input
                            type="checkbox"
                            name="properties[__shopify_send_gift_card_to_recipient]"
                            value="true"
                            id="gift-checkbox-{{ section.id }}"
                          >
                          <span>I want to send this as a gift</span>
                        </label>
                        <div
                          class="gift-card-recipient-fields"
                          id="gift-fields-{{ section.id }}"
                          style="display:none; margin-top: 1rem;"
                        >
                          <input
                            type="email"
                            name="properties[Recipient email]"
                            placeholder="Recipient email"
                            style="width: 100%; margin-bottom: 0.5rem; padding: 0.5rem;"
                          >
                          <input
                            type="text"
                            name="properties[Recipient name]"
                            placeholder="Recipient name"
                            style="width: 100%; margin-bottom: 0.5rem; padding: 0.5rem;"
                          >
                          <textarea
                            name="properties[Message]"
                            placeholder="Message"
                            style="width: 100%; padding: 0.5rem;"
                            rows="3"
                          ></textarea>
                        </div>
                      </div>
                      <script>
                        document
                          .getElementById('gift-checkbox-{{ section.id }}')
                          .addEventListener('change', function (e) {
                            document.getElementById('gift-fields-{{ section.id }}').style.display = e.target.checked
                              ? 'block'
                              : 'none';
                          });
                      </script>
                    {% endif %}
                  </div>

                  {% comment %} TRUST BADGES BLOCK {% endcomment %}
                {% when 'trust_badges' %}
                  <div class="trust-elements">
                    {% if block.settings.show_payment_icons %}
                      <div class="payment-icons">
                        {% for type in shop.enabled_payment_types %}
                          {{ type | payment_type_svg_tag: class: 'payment-icon' }}
                        {% endfor %}
                      </div>
                    {% endif %}
                    {% if block.settings.show_badges %}
                      <div class="trust-badges">
                        {% if block.settings.badge_1_text != blank %}
                          <span class="trust-badge">
                            {{- block.settings.badge_1_icon }}
                            {{ block.settings.badge_1_text -}}
                          </span>
                        {% endif %}
                        {% if block.settings.badge_2_text != blank %}
                          <span class="trust-badge">
                            {{- block.settings.badge_2_icon }}
                            {{ block.settings.badge_2_text -}}
                          </span>
                        {% endif %}
                        {% if block.settings.badge_3_text != blank %}
                          <span class="trust-badge">
                            {{- block.settings.badge_3_icon }}
                            {{ block.settings.badge_3_text -}}
                          </span>
                        {% endif %}
                      </div>
                    {% endif %}
                  </div>

                  {% comment %} SHIPPING INFO BLOCK {% endcomment %}
                {% when 'shipping_info' %}
                  {% if block.settings.text != blank %}
                    <div class="shipping-info">
                      {{ block.settings.text }}
                    </div>
                  {% endif %}

                  {% comment %} SHARE BLOCK {% endcomment %}
                {% when 'share' %}
                  <div class="social-share">
                    <span>{{ block.settings.share_label | default: 'Share' }}:</span>
                    <a
                      href="https://www.facebook.com/sharer.php?u={{ request.origin }}{{ product.url }}"
                      target="_blank"
                      class="share-button"
                      >Facebook</a
                    >
                    <a
                      href="https://twitter.com/share?url={{ request.origin }}{{ product.url }}&text={{ product.title }}"
                      target="_blank"
                      class="share-button"
                      >Twitter</a
                    >
                    <a
                      href="https://pinterest.com/pin/create/button/?url={{ request.origin }}{{ product.url }}&media={{ product.featured_image | image_url: width: 1024 }}"
                      target="_blank"
                      class="share-button"
                      >Pinterest</a
                    >
                  </div>

                  {% comment %} RATING BLOCK {% endcomment %}
                {% when 'rating' %}
                  {% if product.metafields.reviews.rating.value %}
                    <div class="product-reviews">
                      <div class="star-rating">
                        {% assign rating = product.metafields.reviews.rating.value.rating %}
                        {% for i in (1..5) %}
                          <span class="star {% if i <= rating %}filled{% endif %}">‚òÖ</span>
                        {% endfor %}
                      </div>
                      <span class="review-count">({{ product.metafields.reviews.rating.value.count }})</span>
                    </div>
                  {% endif %}

                  {% comment %} COLLAPSIBLE TAB BLOCK {% endcomment %}
                {% when 'collapsible_tab' %}
                  <details class="collapsible-tab">
                    <summary>
                      {% if block.settings.icon != 'none' %}
                        <span class="icon icon-{{ block.settings.icon }}">
                          {% case block.settings.icon %}
                            {% when 'truck' -%}
                              üöö
                            {% when 'checkmark' -%}
                              ‚úì
                            {% when 'info' -%}
                              ‚Ñπ
                            {% when 'question' -%}
                              ?
                          {% endcase %}
                        </span>
                      {% endif %}
                      <span>{{ block.settings.heading | default: 'Collapsible tab' }}</span>
                      <span class="icon-caret">‚ñº</span>
                    </summary>
                    <div class="collapsible-content">
                      {% if block.settings.content != blank %}
                        {{ block.settings.content }}
                      {% elsif block.settings.page != blank %}
                        {{ pages[block.settings.page].content }}
                      {% endif %}
                    </div>
                  </details>

                  {% comment %} POPUP BLOCK {% endcomment %}
                {% when 'popup' %}
                  {% if block.settings.page != blank %}
                    <button type="button" class="link-popup" onclick="openPopup{{ block.id }}()">
                      {{ block.settings.link_label | default: 'View details' }}
                    </button>
                    <div
                      id="popup{{ block.id }}"
                      class="modal"
                      style="display:none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9999; align-items: center; justify-content: center;"
                    >
                      <div
                        class="modal-backdrop"
                        onclick="closePopup{{ block.id }}()"
                        style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8);"
                      ></div>
                      <div
                        class="modal-content"
                        style="position: relative; background: white; padding: 2rem; max-width: 600px; max-height: 80vh; overflow-y: auto; border-radius: 8px;"
                      >
                        <button
                          class="modal-close"
                          onclick="closePopup{{ block.id }}()"
                          style="position: absolute; top: 1rem; right: 1rem; border: none; background: none; font-size: 2rem; cursor: pointer;"
                        >
                          ‚úï
                        </button>
                        <h2>{{ pages[block.settings.page].title }}</h2>
                        {{ pages[block.settings.page].content }}
                      </div>
                    </div>
                    <script>
                      function openPopup{{ block.id }}() {
                        document.getElementById('popup{{ block.id }}').style.display = 'flex';
                        document.body.style.overflow = 'hidden';
                      }
                      function closePopup{{ block.id }}() {
                        document.getElementById('popup{{ block.id }}').style.display = 'none';
                        document.body.style.overflow = '';
                      }
                    </script>
                  {% endif %}

                  {% comment %} CUSTOM LIQUID BLOCK {% endcomment %}
                {% when 'custom_liquid' %}
                  {{ block.settings.custom_liquid }}

                  {% comment %} APP BLOCK {% endcomment %}
                {% when '@app' %}
                  {% render block %}
              {% endcase %}
            </div>
          {% endfor %}
        {% endform %}
      </div>
    </div>
  </div>
</section>

{% comment %} Structured Data {% endcomment %}
{% if section.settings.enable_structured_data %}
  <script type="application/ld+json">
    {
      "@context": "https://schema.org/",
      "@type": "Product",
      "name": {{ product.title | json }},
      "image": [{% for image in product.images limit: 5 %}{{ image | image_url: width: 1200 | json }}{% unless forloop.last %},{% endunless %}{% endfor %}],
      "description": {{ product.description | strip_html | json }},
      "brand": {"@type": "Brand", "name": {{ product.vendor | json }}},
      "sku": {{ selected_varient.sku | json }},
      "offers": {
        "@type": "Offer",
        "url": {{ request.origin | append: product.url | json }},
        "priceCurrency": {{ cart.currency.iso_code | json }},
        "price": {{ selected_varient.price | divided_by: 100.0 | json }},
        "availability": "{% if selected_varient.available %}https://schema.org/InStock{% else %}https://schema.org/OutOfStock{% endif %}",
        "priceValidUntil": {{ 'now' | date: '%s' | plus: 31536000 | date: '%Y-%m-%d' | json }}
      }
      {% if product.metafields.reviews.rating.value %}
        ,"aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": {{ product.metafields.reviews.rating.value.rating | json }},
          "reviewCount": {{ product.metafields.reviews.rating.value.count | json }}
        }
      {% endif %}
    }
  </script>
{% endif %}

<script>
document.addEventListener('DOMContentLoaded', function() {
  const variantSelectors = document.querySelector('[data-section="{{ section.id }}"]');
  if (!variantSelectors) return;

  const allInputs = variantSelectors.querySelectorAll('select, input[type="radio"]');
  const hiddenVariantInput = document.querySelector('input[name="id"]');
  const priceWrapper = document.querySelector('[data-price-wrapper]');
  const submitButton = document.querySelector('button[name="add"]');
  const availabilityElement = document.querySelector('[data-variant-availability]');
  const skuElement = document.querySelector('[data-variant-sku]');
  
  const product = {{ product | json }};
  
  allInputs.forEach(input => input.addEventListener('change', updateVariant));
  
  function updateVariant() {
    const selectedOptions = [];
    
    variantSelectors.querySelectorAll('select').forEach(select => selectedOptions.push(select.value));
    
    const radioGroups = {};
    variantSelectors.querySelectorAll('input[type="radio"]:checked').forEach(radio => {
      const optionName = radio.name.match(/options\[(.*?)\]/)[1];
      radioGroups[optionName] = radio.value;
    });
    
    for (let key in radioGroups) selectedOptions.push(radioGroups[key]);
    
    const matchedVariant = product.variants.find(variant => {
      return selectedOptions.every((option, index) => variant.options[index] === option);
    });
    
    if (matchedVariant) {
      hiddenVariantInput.value = matchedVariant.id;
      
      if (priceWrapper) {
        if (matchedVariant.compare_at_price && matchedVariant.compare_at_price > matchedVariant.price) {
          priceWrapper.innerHTML = `<span class="price__sale">${formatMoney(matchedVariant.price)}</span><s class="price__compare">${formatMoney(matchedVariant.compare_at_price)}</s>`;
        } else {
          priceWrapper.innerHTML = `<span class="price__regular">${formatMoney(matchedVariant.price)}</span>`;
        }
      }
      
      if (availabilityElement) {
        availabilityElement.innerHTML = matchedVariant.available ? '<span class="in-stock">‚úì In stock</span>' : '<span class="out-of-stock">Sold out</span>';
      }
      
      if (skuElement && matchedVariant.sku) skuElement.textContent = matchedVariant.sku;
      
      if (submitButton) {
        submitButton.disabled = !matchedVariant.available;
        const buttonText = submitButton.querySelector('span');
        if (buttonText) buttonText.textContent = matchedVariant.available ? 'Add to cart' : 'Sold out';
        submitButton.classList.toggle('button--primary', matchedVariant.available);
        submitButton.classList.toggle('button--secondary', !matchedVariant.available);
      }
      
      if (window.history.replaceState) {
        window.history.replaceState({}, '', `${window.location.pathname}?variant=${matchedVariant.id}`);
      }
    }
  }
  
  function formatMoney(cents) {
    return typeof Shopify !== 'undefined' && Shopify.formatMoney ? Shopify.formatMoney(cents) : '{{ cart.currency.symbol }}' + (cents / 100).toFixed(2);
  }
});
</script>

{% schema %}
{
  "name": "Product Information",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "üè∑Ô∏è Product Badges"
    },
    {
      "type": "checkbox",
      "id": "show_sale_badge",
      "label": "Show sale badge",
      "default": true
    },
    {
      "type": "select",
      "id": "sale_badge_style",
      "label": "Sale badge style",
      "options": [
        { "value": "text", "label": "Text (Sale)" },
        { "value": "percentage", "label": "Percentage off" },
        { "value": "amount", "label": "Amount saved" }
      ],
      "default": "percentage"
    },
    {
      "type": "checkbox",
      "id": "show_new_badge",
      "label": "Show new badge",
      "default": false
    },
    {
      "type": "range",
      "id": "new_badge_days",
      "label": "Days to show new badge",
      "min": 1,
      "max": 90,
      "default": 30
    },
    {
      "type": "checkbox",
      "id": "show_low_stock_badge",
      "label": "Show low stock badge",
      "default": true
    },
    {
      "type": "range",
      "id": "low_stock_threshold",
      "label": "Low stock threshold",
      "min": 0,
      "max": 100,
      "default": 10
    },
    {
      "type": "checkbox",
      "id": "show_inventory_count",
      "label": "Show exact inventory count",
      "default": false
    },
    {
      "type": "header",
      "content": "üì∏ Product Media Gallery"
    },
    {
      "type": "select",
      "id": "media_layout",
      "label": "Gallery layout",
      "options": [
        { "value": "carousel", "label": "Carousel (Slider)" },
        { "value": "thumbnails", "label": "Thumbnails (Main + Side)" },
        { "value": "grid", "label": "Grid" },
        { "value": "stacked", "label": "Stacked" }
      ],
      "default": "carousel",
      "info": "How product images are displayed"
    },
    {
      "type": "select",
      "id": "media_size",
      "label": "Media size",
      "options": [
        { "value": "small", "label": "Small" },
        { "value": "medium", "label": "Medium" },
        { "value": "large", "label": "Large" }
      ],
      "default": "large"
    },
    {
      "type": "select",
      "id": "media_aspect_ratio",
      "label": "Image aspect ratio",
      "options": [
        { "value": "adapt", "label": "Adapt to media" },
        { "value": "square", "label": "1:1 Square" },
        { "value": "landscape", "label": "4:3 Landscape" },
        { "value": "portrait", "label": "3:4 Portrait" },
        { "value": "widescreen", "label": "16:9 Widescreen" }
      ],
      "default": "adapt"
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "label": "Enable video looping",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_thumbnail_navigation",
      "label": "Show thumbnail navigation",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_lightbox",
      "label": "Enable lightbox (zoom on click)",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "media_zoom_enabled",
      "label": "Enable hover zoom on images",
      "default": false
    },
    {
      "type": "header",
      "content": "‚öôÔ∏è Advanced Settings"
    },

    {
      "type": "header",
      "content": "üìê Section Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top padding",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 36,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom padding",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 12,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_left",
      "label": "Left padding",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 16,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_right",
      "label": "Right padding",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 16,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "üß± Layout Blocks"
    },
    {
      "type": "checkbox",
      "id": "enable_structured_data",
      "label": "Enable structured data (SEO)",
      "default": true
    },
    {
      "type": "range",
      "id": "structured_description_word_limit",
      "label": "Structured data description word limit",
      "min": 10,
      "max": 200,
      "step": 10,
      "default": 60
    }
  ],
  "blocks": [
    {
      "type": "text",
      "name": "üìù Text",
      "settings": [
        {
          "type": "inline_richtext",
          "id": "text",
          "label": "Text",
          "default": "Text block"
        },
        {
          "type": "select",
          "id": "text_style",
          "label": "Text style",
          "options": [
            { "value": "body", "label": "Body" },
            { "value": "subtitle", "label": "Subtitle" },
            { "value": "uppercase", "label": "Uppercase" }
          ],
          "default": "body"
        }
      ]
    },
    {
      "type": "title",
      "name": "üìå Title",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "heading_size",
          "label": "Size",
          "options": [
            { "value": "h2", "label": "Small" },
            { "value": "h1", "label": "Medium" },
            { "value": "h0", "label": "Large" }
          ],
          "default": "h1"
        }
      ]
    },
    {
      "type": "price",
      "name": "üí∞ Price",
      "limit": 1,
      "settings": []
    },
    {
      "type": "description",
      "name": "üìÑ Description",
      "limit": 1,
      "settings": []
    },
    {
      "type": "vendor",
      "name": "üè∑Ô∏è Vendor/Brand",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Brand"
        }
      ]
    },
    {
      "type": "sku",
      "name": "üîñ SKU",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "SKU"
        }
      ]
    },
    {
      "type": "availability",
      "name": "üì¶ Availability",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "in_stock_text",
          "label": "In stock text",
          "default": "‚úì In stock"
        },
        {
          "type": "text",
          "id": "out_stock_text",
          "label": "Out of stock text",
          "default": "Sold out"
        }
      ]
    },
    {
      "type": "rating",
      "name": "‚≠ê Product Rating",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "To display ratings, install a product review app from the Shopify App Store."
        }
      ]
    },
    {
      "type": "variant_picker",
      "name": "üé® Variant Picker",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "picker_type",
          "label": "Picker style",
          "options": [
            { "value": "dropdown", "label": "Dropdown" },
            { "value": "button", "label": "Buttons" },
            { "value": "swatch", "label": "Color Swatches" }
          ],
          "default": "dropdown"
        },
        {
          "type": "select",
          "id": "swatch_shape",
          "label": "Swatch shape",
          "options": [
            { "value": "circle", "label": "Circle" },
            { "value": "square", "label": "Square" }
          ],
          "default": "square"
        }
      ]
    },
    {
      "type": "quantity_selector",
      "name": "üî¢ Quantity Selector",
      "limit": 1,
      "settings": []
    },
    {
      "type": "buy_buttons",
      "name": "üõí Buy Buttons",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "button_text",
          "label": "Button text",
          "default": "Add to cart"
        },
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "label": "Show dynamic checkout buttons",
          "info": "Customers see their preferred payment option (PayPal, Apple Pay, etc.)",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_gift_card_recipient",
          "label": "Show gift card recipient form",
          "info": "For gift card products only",
          "default": true
        }
      ]
    },
    {
      "type": "trust_badges",
      "name": "üîí Trust Badges",
      "settings": [
        {
          "type": "checkbox",
          "id": "show_payment_icons",
          "label": "Show payment method icons",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_badges",
          "label": "Show trust badges",
          "default": true
        },
        {
          "type": "text",
          "id": "badge_1_icon",
          "label": "Badge 1 icon (emoji)",
          "default": "üîí"
        },
        {
          "type": "text",
          "id": "badge_1_text",
          "label": "Badge 1 text",
          "default": "Secure Checkout"
        },
        {
          "type": "text",
          "id": "badge_2_icon",
          "label": "Badge 2 icon",
          "default": "‚Ü©Ô∏è"
        },
        {
          "type": "text",
          "id": "badge_2_text",
          "label": "Badge 2 text",
          "default": "Easy Returns"
        },
        {
          "type": "text",
          "id": "badge_3_icon",
          "label": "Badge 3 icon",
          "default": "‚úì"
        },
        {
          "type": "text",
          "id": "badge_3_text",
          "label": "Badge 3 text",
          "default": "Money-back Guarantee"
        }
      ]
    },
    {
      "type": "shipping_info",
      "name": "üöö Shipping Info",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "Shipping information",
          "default": "<p>üöö Free shipping on orders over $50</p>"
        }
      ]
    },
    {
      "type": "collapsible_tab",
      "name": "üìÇ Collapsible Tab",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Product Details"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Tab content"
        },
        {
          "type": "page",
          "id": "page",
          "label": "Or use content from page"
        },
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            { "value": "none", "label": "None" },
            { "value": "truck", "label": "üöö Truck" },
            { "value": "checkmark", "label": "‚úì Checkmark" },
            { "value": "info", "label": "‚Ñπ Info" },
            { "value": "question", "label": "? Question" }
          ],
          "default": "none"
        }
      ]
    },
    {
      "type": "share",
      "name": "üì§ Share Buttons",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "share_label",
          "label": "Label text",
          "default": "Share"
        }
      ]
    },
    {
      "type": "popup",
      "name": "ü™ü Pop-up Modal",
      "settings": [
        {
          "type": "text",
          "id": "link_label",
          "label": "Link text",
          "default": "View details"
        },
        {
          "type": "page",
          "id": "page",
          "label": "Page to display in pop-up"
        }
      ]
    },
    {
      "type": "custom_liquid",
      "name": "üíß Custom Liquid",
      "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "Custom Liquid code",
          "info": "Add custom Liquid code for advanced features"
        }
      ]
    },
    {
      "type": "@app"
    }
  ],
  "presets": [
    {
      "name": "Product Information",
      "blocks": [
        { "type": "text" },
        { "type": "title" },
        { "type": "rating" },
        { "type": "price" },
        { "type": "description" },
        { "type": "vendor" },
        { "type": "availability" },
        { "type": "variant_picker" },
        { "type": "quantity_selector" },
        { "type": "buy_buttons" },
        { "type": "trust_badges" },
        { "type": "shipping_info" },
        { "type": "collapsible_tab" },
        { "type": "share" }
      ]
    }
  ]
}
{% endschema %}

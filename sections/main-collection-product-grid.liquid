{{ 'custom-template-collection.css' | asset_url | stylesheet_tag }}
{{ 'custom-collection-grid.js' | asset_url | script_tag }}
<style>
  #shopify-section-{{ section.id }} {
    --grid-desktop: {{ section.settings.columns_desktop }};
    --grid-mobile: {{ section.settings.columns_mobile }};
  }
</style>
<div class="collection-page">
  {% paginate collection.products by section.settings.products_per_page %}
    <a class="back-link" href="{{ routes.collections_url }}">Go Back to Collections</a>
    {% if section.settings.heading != blank %}
      <h2 class="collection-page__heading">
        {{ section.settings.heading }}
      </h2>
    {% endif %}
    {% if collection.products.size > 0 %}
      <ul
        class="collection-grid"
        id="product-grid"
        style="
          --columns-mobile: {{ section.settings.columns_mobile }};
          --columns-desktop: {{ section.settings.columns_desktop }};
        "
      >
        {% for product in collection.products %}
          {% render 'custom-product-card', product: product %}
        {% endfor %}
      </ul>
    {% else %}
      <p>No products</p>
    {% endif %}

    {% render 'pagination', paginate: paginate %}
  {% endpaginate %}
</div>
{% schema %}
{
  "name": "Custom Collection Grid",
  "tag": "section",
  "class": "section-collection-grid",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section heading",
      "default": "Collection"
    },
    {
      "type": "checkbox",
      "id": "show_cart_icon",
      "label": "Show cart icon in Add to Cart button",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "Show product vendor",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_compare_price",
      "label": "Show compare at price",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_add_to_cart",
      "label": "Show Add to Cart button",
      "default": true
    },
    {
      "type": "range",
      "id": "products_per_page",
      "label": "Products per page",
      "min": 4,
      "max": 48,
      "step": 4,
      "default": 12
    },

    {
      "type": "text",
      "id": "add_to_cart_text",
      "label": "Add to Cart button text",
      "default": "Add to cart"
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "label": "Products per row (Mobile)",
      "min": 2,
      "max": 2,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Products per row (Desktop)",
      "min": 3,
      "max": 6,
      "step": 1,
      "default": 4
    },
    {
      "type": "text",
      "id": "empty_text",
      "label": "Empty collection text",
      "default": "No products found"
    },
    {
      "type": "select",
      "id": "hover_image_behavior",
      "label": "Product image hover behavior",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "swap",
          "label": "Swap to next image"
        },
        {
          "value": "scroll",
          "label": "Auto-scroll images"
        }
      ],
      "default": "swap"
    },
    {
      "type": "range",
      "id": "hover_image_limit",
      "label": "Images used on hover",
      "min": 2,
      "max": 6,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "hover_scroll_speed",
      "label": "Hover scroll speed (ms)",
      "min": 600,
      "max": 1800,
      "step": 200,
      "default": 1000
    }
  ],
  "presets": [
    {
      "name": "Custom Collection Grid"
    }
  ]
}
{% endschema %}

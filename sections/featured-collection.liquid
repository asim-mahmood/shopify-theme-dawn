{{ 'custom-template-collection.css' | asset_url | stylesheet_tag }}
{{ 'custom-collection-grid.js' | asset_url | script_tag }}
<style>
  #shopify-section-{{ section.id }} {
    --grid-desktop: {{ section.settings.columns_desktop }};
    --grid-mobile: {{ section.settings.columns_mobile }};
  }
</style>

{% assign collection = section.settings.featured_collection %}
<div class="collection-page">
  {% if section.settings.heading != blank %}
    <div class="collection-hero ">
      <div class="collection-hero__inner page-width">
        <div class="collection-hero__text-wrapper">
          <h1 class="collection-hero__title">
            {{ section.settings.heading }}
          </h1>
        </div>
      </div>
    </div>
  {% endif %}

  {% if collection.products.size > 0 %}
    <ul
      class="collection-grid"
      id="product-grid"
      style="
        --columns-mobile: {{ section.settings.columns_mobile }};
        --columns-desktop: {{ section.settings.columns_desktop }};
      "
    >
      {% for product in collection.products limit: section.settings.products_per_page %}
        {% render 'custom-product-card',
          product: product,
          hover_image_behavior: section.settings.hover_image_behavior,
          hover_scroll_speed: section.settings.hover_scroll_speed,
          hover_image_limit: section.settings.hover_image_limit,
          show_vendor: section.settings.show_vendor,
          show_add_to_cart: section.settings.show_add_to_cart,
          show_cart_icon: section.settings.show_cart_icon,
          add_to_cart_text: section.settings.add_to_cart_text
        %}
      {% endfor %}
    </ul>
  {% else %}
    <p>{{ section.settings.empty_text }}</p>
  {% endif %}
</div>

{% schema %}
{
  "name": "Featured Collection",
  "tag": "section",
  "class": "section-featured-collection",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured collection"
    },
    {
      "type": "collection",
      "id": "featured_collection",
      "label": "Select collection"
    },

    {
      "type": "range",
      "id": "products_per_page",
      "label": "Number of products to show",
      "min": 4,
      "max": 24,
      "step": 4,
      "default": 8
    },

    {
      "type": "range",
      "id": "columns_mobile",
      "label": "Products per row (Mobile)",
      "min": 2,
      "max": 2,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Products per row (Desktop)",
      "min": 3,
      "max": 6,
      "step": 1,
      "default": 4
    },

    {
      "type": "header",
      "content": "Product card"
    },

    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "Show product vendor",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_add_to_cart",
      "label": "Show Add to Cart button",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_cart_icon",
      "label": "Show cart icon in Add to Cart button",
      "default": true
    },
    {
      "type": "text",
      "id": "add_to_cart_text",
      "label": "Add to Cart button text",
      "default": "Add to cart"
    },

    {
      "type": "header",
      "content": "Product images"
    },

    {
      "type": "select",
      "id": "hover_image_behavior",
      "label": "Product image hover behavior",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "swap", "label": "Swap to next image" },
        { "value": "scroll", "label": "Auto-scroll images" }
      ],
      "default": "swap"
    },
    {
      "type": "range",
      "id": "hover_image_limit",
      "label": "Images used on hover",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "hover_scroll_speed",
      "label": "Hover scroll speed (ms)",
      "min": 600,
      "max": 1800,
      "step": 200,
      "default": 1000
    },

    {
      "type": "text",
      "id": "empty_text",
      "label": "Text to show if collection is empty",
      "default": "No products found in this collection."
    }
  ],
  "presets": [
    {
      "name": "Featured Collection",
      "category": "Collections"
    }
  ]
}
{% endschema %}
